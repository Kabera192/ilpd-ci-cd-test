spring.application.name=REGISTRATION-SERVICE
server.port=8089
spring.profiles.active=${PROFILE_MODE:dev}

# Eureka configurations
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.service-url.defaultZone=${SERVICE_REGISTRY_URL:http://localhost:8761/eureka/}
eureka.instance.hostname=localhost

# MongoDB Configuration
spring.data.mongodb.host=${MONGO_HOST:localhost}
spring.data.mongodb.port=${MONGO_PORT:27017}
spring.data.mongodb.database=${MONGO_DB:academic_db}
spring.data.mongodb.username=${MONGO_USER:mongo}
spring.data.mongodb.password=${MONGO_PWD:mongo}
spring.data.mongodb.authentication-database=${MONGO_AUTH_DB:admin}

spring.data.mongodb.uuid-representation=standard

# Security configuration
auth.service.url=${AUTH_SERVICE_URL:http://localhost:8085}
security.cors.allowed-origins=${CORS_ORIGINS:*}
security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
security.cors.allowed-headers=*
security.cors.allow-credentials=true
security.cors.max-age=3600

# MISSING PROPERTY - This is what was causing the error
security.public-endpoints=/public/**,/health,"/v3/api-docs/**","/v3/api-docs.yaml","/swagger-ui.html","/swagger-ui/**","/v3/api-docs/swagger-config","/api-docs/**","/webjars/**"

# JWT settings
spring.app.jwtSecret=${SPRING_APP_JWT_SECRET:defaultSecretKey}
spring.app.jwtIssuer=${SPRING_APP_JWT_ISSUER:REGISTRATION-SERVICE}
spring.app.jwt.public-key=classpath:certs/public.pem


springdoc.api-docs.path=/api/v1/registration/v3/api-docs
springdoc.swagger-ui.path=/api/v1/registration/swagger-ui
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.operations-sorter=alpha
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.display-operation-id=false

security.whitelist.endpoints=\
"/api/v1/registration/v3/api-docs/**",\
"/api/v1/registration/swagger-ui/**",\
"/swagger-ui.html",\
"/api-docs/**",\
"/webjars/**"

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.cache.type=redis
spring.cache.redis.time-to-live=300000

# Feign Client Configuration
feign.client.config.default.connectTimeout=5000
feign.client.config.default.readTimeout=5000
feign.circuitbreaker.enabled=true

# Specific Feign client configurations (FIXED - removed problematic encoder configs)
feign.client.config.NOTIFICATION-SERVICE.loggerLevel=FULL
feign.client.config.notificationDocumentClient.decode404=true
feign.client.config.notificationDocumentClient.loggerLevel=FULL

# Logging configurations
logging.level.rw.ac.ilpd.registrationservice.security=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.rw.ac.ilpd.registrationservice.client=DEBUG
logging.level.feign=DEBUG
logging.level.rw.ac.ilpd.registrationservice.config.FeignConfig=DEBUG

# System configurations
app.system.token=${SYSTEM_TOKEN:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzeXN0ZW0iLCJuYW1lIjoiU3lzdGVtIFNlcnZpY2UiLCJpYXQiOjE2OTM2NTk4MjAsImV4cCI6MTc5MzY1OTgyMCwiaXNzIjoiaWxwZC1taXMiLCJyb2xlcyI6WyJTWVNURU0iLCJBRE1JTiJdfQ.3JXzGRF9jBzS-yv9ZvqI5JLQlLl9p9gg9VdOLJB1VvQ}
app.initialization.require-auth=false
app.initialization.enabled=false

# Enable bean definition overriding
spring.main.allow-bean-definition-overriding=true

# Exclude DataSource auto-configuration (since we're using MongoDB)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration